# Generated by Ansible

[mysqld]

datadir={{ percona_data_dir }}
user={{ percona_db_user }}

# Path to Galera library
wsrep_provider={{ percona_wsrep_provider }}

# Empty gcomm address is only used when cluster is getting bootstrapped
wsrep_cluster_address=gcomm://

# Cluster connection URL contains the IPs of all nodes
#wsrep_cluster_address=

# In order for Galera to work correctly binlog format should be ROW
binlog_format={{ percona_binlog_format }}

# MyISAM storage engine has only experimental support
default_storage_engine={{ percona_default_storage_engine }}

# This is a recommended tuning variable for performance
innodb_locks_unsafe_for_binlog={{ percona_innodb_locks_unsafe_for_binlog }}

# This changes how InnoDB autoincrement locks are managed and is a requirement for Galera
innodb_autoinc_lock_mode={{ percona_autoinc_lock_mode }}

# my ip
wsrep_node_address={{ ansible_eth0.ipv4.address }}

# SST method
wsrep_sst_method={{ percona_wsrep_sst_method }}

# Cluster name
wsrep_cluster_name={{ percona_wsrep_cluster_name }}

# Authentication for SST method
wsrep_sst_auth={{ percona_wsrep_sst_auth }}

# CACHES AND LIMITS #
tmp-table-size = {{ percona_tmp_table_size }}
max-heap-table-size = {{ percona_max_heap_table_size }}
query-cache-type = {{ percona_query_cache_size }}
query-cache-size = {{ percona_query_cache_size }}
max-connections = {{ percona_max_connections }}
thread-cache-size = {{ percona_thread_cache_size }}
open-files-limit = {{ percona_open_files_limit }}
table-definition-cache = {{ percona_table_definition_cache }}
table-open-cache = {{ percona_table_open_cache }}

# INNODB #
innodb-flush-method = {{ percona_innodb_flush_method }}
innodb-log-files-in-group = {{ percona_log_files_in_group }}
innodb-flush-log-at-trx-commit = {{ percona_flush_log_at_trx_commit }}
innodb-file-per-table = {{ percona_innodb_file_per_table }}
innodb-buffer-pool-size = {{ percona_buffer_pool_size }}

# LOGGING #
log-error = {{ percona_error_log }}
log-queries-not-using-indexes = {{ percona_log_queries_not_using_indexes }}
slow-query-log = {{ percona_slow_query_log }}
slow-query-log-file = {{ percona_slow_log }}

# Custom Parameters
transaction-isolation = {{ percona_transaction_isolation }}
innodb_read_io_threads = {{ percona_innodb_read_io_threads }}
innodb_write_io_threads = {{ percona_innodb_write_io_threads }}
wsrep_slave_threads = {{ percona_wsrep_slave_threads }}
innodb_io_capacity = {{ percona_innodb_io_capacity }}
innodb_flush_neighbor_pages = {{ percona_innodb_flush_neighbor_pages }}
innodb-log-file-size = {{ percona_innodb_log_file_size }}
